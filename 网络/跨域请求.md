<!--
 * @Author: your name
 * @Date: 2020-03-04 15:00:53
 * @LastEditTime: 2021-08-26 11:11:40
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: \vue-note\网络\跨域请求.md
 -->

# 跨域请求

## 同源策略

浏览器的安全策略，通讯协议+域名+端口号都相同时，为同源

## 作用

为防止 CORF 跨站请求伪造

## 方法

- 开发阶段使用 webpack 的 proxy 反代理设置，原理同 Nginx 反代理，vue 渲染服务和代理服务器都是 webpack-dev-server
- JSONP
- CORS(Cross-Origin Resource Sharing)​ 跨源资源共享
  - 不需要 cookie， 只需要服务器端配置响应头 Access-Control-Allow-Origin：\*
  - 需要 cookie,前后端都需要设置
    - 前端：axios.defaults.withCredentials = true
    - 后端：
      response.setHeader("Access-Control-Allow-Origin", origin)，需要指定单一域名，不能使用通配符'\*';
      response.setHeader("Access-Control-Allow-Credentials", "true");
- Nginx 反代理，用 nginx 配置一个反代理服务器，用来访问真正服务器，因为服务器间的访问不存在跨域
